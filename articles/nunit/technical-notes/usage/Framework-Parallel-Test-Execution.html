<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html lang="en">

  <head>
    <meta charset="utf-8">
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-PCB5BYBNM2"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag() { dataLayer.push(arguments); }
      gtag('js', new Date());
      gtag('config', 'G-PCB5BYBNM2');
    </script>
      <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
      <title>Framework Parallel Test Execution | NUnit Docs </title>
      <meta name="viewport" content="width=device-width">
      <meta name="title" content="Framework Parallel Test Execution | NUnit Docs ">
    
    
      <link rel="shortcut icon" href="../../../../favicon.ico">
      <link rel="stylesheet" href="../../../../styles/docfx.vendor.min.css">
      <link rel="stylesheet" href="../../../../styles/docfx.css">
      <link rel="stylesheet" href="../../../../styles/main.css">
      <meta property="docfx:navrel" content="../../../../toc.html">
      <meta property="docfx:tocrel" content="../../../toc.html">
    
    <meta property="docfx:rel" content="../../../../">
    
  </head>
  <body data-spy="scroll" data-target="#affix" data-offset="120">
    <div id="wrapper">
      <header>

        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>

              <a class="navbar-brand" href="../../../../index.html">
                <img id="logo" class="svg" src="../../../../logo.svg" alt="">
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
            </div>
          </div>
        </nav>

        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div class="container body-content">

        <div id="search-results">
          <div class="search-list">Search Results for <span></span></div>
          <div class="sr-items">
            <p><i class="glyphicon glyphicon-refresh index-loading"></i></p>
          </div>
          <ul id="pagination" data-first=First data-prev=Previous data-next=Next data-last=Last></ul>
        </div>
      </div>
      <div role="main" class="container body-content hide-when-search">

        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div id="sidetoc"></div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="">
<h1 id="framework-parallel-test-execution">Framework Parallel Test Execution</h1>

<p>The NUnit 3.0 framework can run tests in parallel within an assembly. This is a completely separate facility from
<a href="Engine-Parallel-Test-Execution.html">Engine Parallel Test Execution</a>, although it is possible to use both in the same
test run.</p>
<p>By default, no parallel execution takes place. Attributes are used to indicate which tests may run in parallel and how
they relate to other tests.</p>
<h2 id="platform-support">Platform Support</h2>
<p>Parallel execution is supported by the NUnit framework on desktop .NET runtimes and .NET Standard 2.0. It is not
supported in the .NET Standard 1.6 build, although the attributes are recognized without error in order to allow use in
projects that build against multiple targets.</p>
<h2 id="parallelizableattribute">ParallelizableAttribute</h2>
<p>This attribute is used to indicate whether the test and/or its descendants may be run in parallel with other tests. The
constructor takes an optional <code>ParallelScope</code> enumeration argument (see below), which defaults to <code>ParallelScope.Self</code>.
The attribute may be used at the assembly, class or method level and the word &quot;test&quot; in the rest of this description
refers to the suite or test case that corresponds to the item on which the attribute appears.</p>
<p>One Named Property is supported:</p>
<ul>
<li><code>Scope = ParallelScope</code> for setting <code>ParallelScope</code> using property syntax</li>
</ul>
<h2 id="nonparallelizableattribute">NonParallelizableAttribute</h2>
<p>This Attribute is used to indicate that the test as well as its descendants may <strong>not</strong> be run in parallel with other
tests. Although <code>[NonParallelizable]</code> is completely equivalent to <code>[Parallelizable(ParallelScope.None)]</code>, we recommend
that you use the former for clarity.</p>
<h2 id="parallelscope-enumeration">ParallelScope Enumeration</h2>
<p>This is a <code>[Flags]</code> type enumeration used to specify which tests may run in parallel. It applies to the test upon which
it appears and any subordinate tests. The following values are available for use:</p>
<ul>
<li><code>ParallelScope.Self</code> indicates that the test itself may be run in parallel with other tests. This is the default for
the <code>ParallelizableAttribute</code> and is the only value permitted on a test method.</li>
<li><code>ParallelScope.Children</code> indicates that the descendants of the test may be run in parallel with respect to one
another.</li>
<li><code>ParallelScope.Fixtures</code> indicates that test fixtures that are the descendants of the test may be run in parallel with
one another.`</li>
</ul>
<div class="NOTE">
<h5>Note</h5>
<p>Additional values of the enumerator are used internally. They do not show up in the Intellisense and are not
documented here. The value <code>ParallelScope.None</code>, which was used before the creation of the
<code>NonParallelizableAttribute</code> is still accepted for the purpose of backward compatibility.</p>
</div>
<h2 id="specifying-parallelism-at-multiple-test-levels">Specifying Parallelism at Multiple Test Levels</h2>
<p><code>[Parallelizable]</code> or <code>[NonParallelizable]</code> may be specified on multiple levels of the tests, with lower-level
specifications overriding higher ones to a certain degree. Thus, if the assembly has <code>[NonParallelizable]</code> either by use
of the attribute or by default, classes with <code>[Parallelizable]</code> may be run in parallel as may their children if an
appropriate scope is used.</p>
<p>It is important to note that a parallel or non-parallel specification only applies at that level where it appears and
below. It cannot override the settings on higher-level tests. In this way, parallelism is not absolute but is relative
to other tests at the same level in the tree. The following are a few examples of how this works:</p>
<ol>
<li><p><strong>Non-parallel class with parallel methods:</strong> The methods only run in parallel with one another, not with the test
methods of any other classes.</p>
</li>
<li><p><strong>Parallel class with non-parallel methods:</strong> The methods run sequentially, usually on the same thread that ran the
class one-time setup, but may actually be running in parallel with other, unrelated methods from other classes.</p>
</li>
<li><p><strong>Non-parallel SetUpFixture with parallel test fixtures:</strong> The entire group of fixtures runs separately from any
fixtures outside the group. Within the group, multiple fixtures run in parallel.</p>
</li>
<li><p><strong>Parallel SetUpFixture with non-parallel test fixtures:</strong> The group runs in parallel with other fixtures and groups.
Within the group, only one fixture at a time may execute.</p>
</li>
<li><p><strong>Parallel SetUpFixture with non-parallel test fixtures containing parallel test cases:</strong> This is just one example of
a more complex setup. The fixtures themselves run as described in (4) but the cases within each fixture run in
parallel with one another.</p>
</li>
</ol>
<p>Once you understand the principles, you can construct complex hierarchies of parallel and non-parallel tests.</p>
<h2 id="levelofparallelismattribute">LevelOfParallelismAttribute</h2>
<p>This is an <strong>assembly-level</strong> attribute, which may be used to specify the level of parallelism, that is, the maximum
number of worker threads executing tests in this assembly. It may be overridden using a command-line option in the
console runner. If it is not specified, NUnit uses a default value based on the number of processors available or a
specified minimum, whichever is greater.</p>
<h2 id="parallel-execution-internals">Parallel Execution Internals</h2>
<p>We use multiple queues organized into &quot;shifts&quot;. A <code>WorkShift</code> consists of one or more queues of work items, which may be
active at the same time. As the name suggests, no two shifts are active simultaneously. NUnit runs one <code>WorkShift</code> until
all available work is complete and then switches to the next shift. When there is no work for any shift, the run is
complete.</p>
<p>There are three shifts, listed here with their associated queues...</p>
<table>
<thead>
<tr>
<th>Shift</th>
<th>Queues</th>
<th>Workers</th>
<th>Usage</th>
</tr>
</thead>
<tbody>
<tr>
<td>Parallel Shift</td>
<td>Parallel Queue</td>
<td>LoP*</td>
<td>Parallelizable tests run in the MTA</td>
</tr>
<tr>
<td></td>
<td>Parallel STA Queue</td>
<td>1</td>
<td>Parallelizable tests run in the STA</td>
</tr>
<tr>
<td>Non-Parallel Shift</td>
<td>Non-Parallel Queue</td>
<td>1</td>
<td>Non-parallelizable tests run in the MTA</td>
</tr>
<tr>
<td>Non-Parallel STA Shift</td>
<td>Non-Parallel STA Queue</td>
<td>1</td>
<td>Non-parallelizable tests run in the STA</td>
</tr>
</tbody>
</table>
<p>(* Depends on Level of Parallelism)</p>
<p>For efficiency, each queue is created when the first test is added to it. At the time of creation, all workers for that
queue are also created and initialized.</p>
<p>Whenever a non-parallel fixture begins execution, an entirely new set of queues is created so that the child tests of
that fixture may be run without any conflict from other tests that are already in the main set of queues.</p>
<p>If the command line specifies zero workers, all use of the dispatcher and its queues is bypassed and tests are run
sequentially on a single thread.</p>

</article>
          </div>

          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <div class="contribution">
                <ul class="nav">
                  <li>
                    <a href="https://github.com/nunit/docs/blob/master/docs/articles/nunit/technical-notes/usage/Framework-Parallel-Test-Execution.md/#L1" class="contribution-link">Edit this page</a>
                  </li>
                </ul>
              </div>
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
                <h5>In this article</h5>
                <div></div>
              </nav>
            </div>
          </div>
        </div>
      </div>

      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
      <span>Generated by <strong>DocFX</strong></span> | Copyright (c) 2018-<span id="currentYear"></span> The NUnit Project - Licensed under <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a>
      
          </div>
        </div>
      </footer>
    </div>

    <script type="text/javascript" src="../../../../styles/docfx.vendor.min.js"></script>
    <script type="text/javascript" src="../../../../styles/docfx.js"></script>
    <script type="text/javascript" src="../../../../styles/main.js"></script>
  </body>
</html>
