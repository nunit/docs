<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>

  <head>
    <meta charset="utf-8">
    <script async="" src="https://www.googletagmanager.com/gtag/js?id=G-PCB5BYBNM2"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag() { dataLayer.push(arguments); }
      gtag('js', new Date());
      gtag('config', 'G-PCB5BYBNM2');
    </script>
      <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
      <title>SetUp And TearDown Changes | NUnit Docs </title>
      <meta name="viewport" content="width=device-width">
      <meta name="title" content="SetUp And TearDown Changes | NUnit Docs ">
    
      <link rel="shortcut icon" href="../../../../favicon.ico">
      <link rel="stylesheet" href="../../../../styles/docfx.vendor.min.css">
      <link rel="stylesheet" href="../../../../styles/docfx.css">
      <link rel="stylesheet" href="../../../../styles/main.css">
      <meta property="docfx:navrel" content="../../../../toc.html">
      <meta property="docfx:tocrel" content="../../../toc.html">
    
    <meta property="docfx:rel" content="../../../../">
    
  </head>
  <body data-spy="scroll" data-target="#affix" data-offset="120">
    <div id="wrapper">
      <header>

        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>

              <a class="navbar-brand" href="../../../../index.html">
                <img id="logo" class="svg" src="../../../../logo.svg" alt="">
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
            </div>
          </div>
        </nav>

        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div class="container body-content">

        <div id="search-results">
          <div class="search-list">Search Results for <span></span></div>
          <div class="sr-items">
            <p><i class="glyphicon glyphicon-refresh index-loading"></i></p>
          </div>
          <ul id="pagination" data-first="First" data-prev="Previous" data-next="Next" data-last="Last"></ul>
        </div>
      </div>
      <div role="main" class="container body-content hide-when-search">

        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div id="sidetoc"></div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="setupteardownchanges">
<h1 id="setup-and-teardown-changes">SetUp And TearDown Changes</h1>

<p>This page describes significant changes in SetUp and TearDown in NUnit 3.0</p>
<p>Existing NUnit 2.6.4 attributes used for SetUp and TearDown were</p>
<ul>
<li>SetUpAttribute</li>
<li>TearDownAttribute</li>
<li>TestFixtureSetUpAttribute</li>
<li>TestFixtureTearDownAttribute</li>
<li>SetUpFixtureAttribute</li>
</ul>
<p>Taken together, these attributes provided per-test setup and teardown at the fixture level and one-time setup and teardown at the fixture, namespace and assembly levels.</p>
<p>These features were somewhat confusing:</p>
<ul>
<li>SetUpFixture seems not very well understood by users in general.</li>
<li>TestFixtureSetUp and TestFixtureTearDown could do with better names.</li>
<li>SetUp and TearDown designate per-test setup/teardown within a test fixture, one-time setup/teardown within a setup fixture</li>
</ul>
<p>For NUnit 3.0 we standardized the use of attributes for setup and teardown and renamed some of them to make their function clearer.</p>
<h2 id="attribute-usage">Attribute Usage</h2>
<ul>
<li><a class="xref" href="../attributes/setup.html">SetUpAttribute</a> is now used exclusively for per-test setup.</li>
<li><a class="xref" href="../attributes/teardown.html">TearDownAttribute</a> is now used exclusively for per-test teardown.</li>
<li><a class="xref" href="../attributes/onetimesetup.html">OneTimeSetUpAttribute</a> is used for one-time setup per test-run. If you run <em>n</em> tests, this event will only occur once.</li>
<li><a class="xref" href="../attributes/onetimeteardown.html">OneTimeTearDownAttribute</a> is used for one-time teardown per test-run. If you run <em>n</em> tests, this event will only occur once</li>
<li><a class="xref" href="../attributes/setupfixture.html">SetUpFixtureAttribute</a> continues to be used as at before, but with changed method attributes.</li>
</ul>
<h3 id="attribute-usage-by-fixture-type">Attribute Usage by Fixture Type</h3>
<table>
<thead>
<tr>
<th></th>
<th>TestFixture</th>
<th>SetUpFixture</th>
</tr>
</thead>
<tbody>
<tr>
<td>OneTimeSetUp</td>
<td>Supported</td>
<td>Supported</td>
</tr>
<tr>
<td>OneTimeTearDown</td>
<td>Supported</td>
<td>Supported</td>
</tr>
<tr>
<td>TestFixtureSetUp</td>
<td>Deprecated</td>
<td>Not Allowed</td>
</tr>
<tr>
<td>TestFixtureTearDown</td>
<td>Deprecated</td>
<td>Not Allowed</td>
</tr>
<tr>
<td>SetUp</td>
<td>Supported</td>
<td>Not Allowed</td>
</tr>
<tr>
<td>TearDown</td>
<td>Supported</td>
<td>Not Allowed</td>
</tr>
</tbody>
</table>
<h2 id="backward-compatibility">Backward Compatibility</h2>
<p><strong>TestFixtureSetUpAttribute</strong> and <strong>TestFixtureTearDownAttribute</strong> continue to be supported as synonyms for <strong>OneTimeSetUpAttribute</strong> and <strong>OneTimeTearDownAttribute</strong> in test fixtures, but are deprecated.</p>
<p>Since <strong>SetUpAttribute</strong> and <strong>TearDownAttribute</strong> are used in two different ways, it's not possible to simply deprecate their usage in SetUpFixture. They have been disallowed in that context, which is a <a class="xref" href="../../release-notes/breaking-changes.html">breaking change</a>.</p>
<h2 id="how-setup-and-teardown-methods-are-called">How Setup and TearDown Methods Are Called</h2>
<p>Multiple SetUp, OneTimeSetUp, TearDown and OneTimeTearDown methods may exist within a class. The rules for how the setup methods are called will be the same in NUnit 3.0 as in NUnit 2.6. However, there is a change in the calling of the teardown methods.</p>
<p>Setup methods (both types) are called on base classes first, then on derived classes. If any setup method throws an exception, no further setups are called. This is the same as in NUnit 2.6.</p>
<p>Teardown methods (again, both types) are called on derived classes first, then on the base class. In NUnit 2.6, all teardown methods were called so long as <strong>any</strong> setup method was called. It was entirely up to the teardown method to determine how much of the initialization took place.</p>
<p>In NUnit 3.0, the teardown methods at any level in the inheritance hierarchy will be called only if a setup method <strong>at the same level</strong> was called. The following example is illustrates the difference.</p>
<pre><code class="lang-csharp">public class BaseClass
{
   [SetUp]
   public void BaseSetUp() { /* ... */ } // Exception thrown!

   [TearDown]
   public void BaseTearDown() { /* ... */ }
}

[TestFixture]
public class DerivedClass : BaseClass
{
   [SetUp]
   public void DerivedSetUp() { /* ... */ }

   [TearDown]
   public void DerivedTearDown() { /* ... */ }

   [Test]
   public void TestMethod() { /* ... */ }
}
</code></pre>
<p>Assume that an exception is thrown in BaseSetUp. In NUnit 2.6, methods would be executed as follows:</p>
<ul>
<li>BaseSetUp</li>
<li>DerivedTearDown</li>
<li>BaseTearDown</li>
</ul>
<p>In NUnit 3.0, execution will proceed as follows:</p>
<ul>
<li>BaseSetUp</li>
<li>BaseTearDown</li>
</ul>
<p>This is potentially a <a class="xref" href="../../release-notes/breaking-changes.html">breaking change</a> for some users.</p>
<h2 id="unresolved-issues">Unresolved Issues</h2>
<ul>
<li>We need to define how setup and teardown methods are ordered with respect to the newly introduced <a class="xref" href="../../extending-nunit/Action-Attributes.html">Action Attributes</a> and how they interact.</li>
</ul>
</article>
          </div>

          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <div class="contribution">
                <ul class="nav">
                  <li>
                    <a href="https://github.com/nunit/docs/blob/master/docs/articles/nunit/writing-tests/setup-teardown/SetUp-and-TearDown-Changes.md/#L1" class="contribution-link">Improve this Doc</a>
                  </li>
                </ul>
              </div>
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
                <h5>In This Article</h5>
                <div></div>
              </nav>
            </div>
          </div>
        </div>
      </div>

      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
      <span>Generated by <strong>DocFX</strong></span> | Copyright (c) 2018-<span id="currentYear"></span> The NUnit Project - Licensed under <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a>
      
          </div>
        </div>
      </footer>
    </div>

    <script type="text/javascript" src="../../../../styles/docfx.vendor.min.js"></script>
    <script type="text/javascript" src="../../../../styles/docfx.js"></script>
    <script type="text/javascript" src="../../../../styles/main.js"></script>
  </body>
</html>
