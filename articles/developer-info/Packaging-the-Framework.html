<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html lang="en">

  <head>
    <meta charset="utf-8">
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-PCB5BYBNM2"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag() { dataLayer.push(arguments); }
      gtag('js', new Date());
      gtag('config', 'G-PCB5BYBNM2');
    </script>
      <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
      <title>Packaging the Framework | NUnit Docs </title>
      <meta name="viewport" content="width=device-width">
      <meta name="title" content="Packaging the Framework | NUnit Docs ">
    
    
      <link rel="shortcut icon" href="../../favicon.ico">
      <link rel="stylesheet" href="../../styles/docfx.vendor.min.css">
      <link rel="stylesheet" href="../../styles/docfx.css">
      <link rel="stylesheet" href="../../styles/main.css">
      <meta property="docfx:navrel" content="../../toc.html">
      <meta property="docfx:tocrel" content="../toc.html">
    
    <meta property="docfx:rel" content="../../">
    
  </head>
  <body data-spy="scroll" data-target="#affix" data-offset="120">
    <div id="wrapper">
      <header>

        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>

              <a class="navbar-brand" href="../../index.html">
                <img id="logo" class="svg" src="../../logo.svg" alt="">
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
            </div>
          </div>
        </nav>

        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div class="container body-content">

        <div id="search-results">
          <div class="search-list">Search Results for <span></span></div>
          <div class="sr-items">
            <p><i class="glyphicon glyphicon-refresh index-loading"></i></p>
          </div>
          <ul id="pagination" data-first=First data-prev=Previous data-next=Next data-last=Last></ul>
        </div>
      </div>
      <div role="main" class="container body-content hide-when-search">

        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div id="sidetoc"></div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="">
<h1 id="packaging-the-framework">Packaging the Framework</h1>

<p>This note describes how to create release packages for the NUnit Framework. Currently, all the builds and packaging must
be done on a single Windows machine.</p>
<h2 id="software-prerequisites">Software Prerequisites</h2>
<p>Various software combinations and environments may be used to build NUnit components. The following software is what we
have used and tested for building everything and creating the release packages. We'll add options to the list as we find
them.</p>
<ol>
<li>Visual Studio 2022 17.10 or newer with the NuGet Package manager.</li>
<li>.NET 6.0 SDK</li>
<li>.NET 8.0 SDK</li>
</ol>
<h2 id="preparing-for-release">Preparing for Release</h2>
<h3 id="create-a-release-branch">Create a Release Branch</h3>
<p>All work on releases should be done on a branch.</p>
<ol>
<li>On master <code>git switch main</code>, Pull latest <code>git pull</code></li>
<li>Create a branch to prepare the release <code>git switch -c releaseXYZ</code>, where <code>XYZ</code> is the release number, e.g. <code>4.2.0</code>.</li>
<li>Push the branch to GitHub <code>git push -u origin releaseXYZ</code></li>
<li>As you make the changes below, push the changes to GitHub and create a Pull Request targeting the <code>main</code> branch to
allow other team members to review your changes.</li>
<li>The PR can be created in the web or using the GitHub CLI with <code>gh pr create -a rprouse -B release -t &quot;Release 3.13&quot;</code></li>
</ol>
<h3 id="make-sure-it-works">Make Sure it Works</h3>
<ol>
<li><p>Close all instances of Visual Studio or other IDE to ensure that no changes are left unsaved.</p>
</li>
<li><p>Do a clean build and run all the tests on Windows. You may use the command below or three separate commands if
preferred. If you encounter errors at any stage, you're not actually ready to release!</p>
<pre><code class="lang-cmd">build --target clean
build --target test
</code></pre>
</li>
<li><p>Repeat the build on a Linux system, if available. If this is not possible, be sure to scrutinize the results from the
Linux Github actions build carefully. On Linux, you may use the command</p>
<p><code>build -target=test</code></p>
</li>
</ol>
<h3 id="review-milestone-status">Review Milestone Status</h3>
<ol>
<li>Check the milestone for the current release to see that there are no open issues. Any issues that are not going to be
in this release should be moved to a future milestone. This may be the time to create the next milestone.</li>
<li>Check all future open milestones for completed issues. Anything that is completed will be included in this release so
change its milestone to the current release.</li>
<li>Review all closed issues without a milestone. Move them to the current milestone if they were fixed in this release,
or set their milestone to <code>Closed without action</code> for questions and issues that were closed without a fix. You can
use the following query to find issues that need to be reviewed:</li>
</ol>
<pre><code class="lang-cmd">    is:issue no:milestone is:closed -label:closed:sep -label:closed:notabug -label:is:question -label:closed:wontfix -label:closed:noresponsefromreporter -label:closed:fixedin_newer_version -label:closed_moved_to_discussion -label:closed:duplicate -label:closed:byDesign
</code></pre>
<h3 id="update-copyright-year">Update Copyright Year</h3>
<p>If necessary, update the year in the general copyright notice LICENSE.txt. Note that these copyright notices refer to
each of the packages in their entirety.
Each of the <code>.nuspec</code> files in the <code>nuget</code> subdirectory contains a copyright
line, which should also be updated.</p>
<h3 id="update-the-version-number-if-needed">Update the version number if needed</h3>
<p>The version is given using <a href="https://github.com/adamralph/minver?tab=readme-ov-file#minver">MinVer</a>.
If the version number doesn't match you expected XYZ, you update the version number by adding and pushing a tag in main.
<strong>Note that this tag has to be on the commit that you're releasing.</strong></p>
<h3 id="update-release-notes-in-frameworkmd">Update Release notes in <code>framework.md</code></h3>
<p>To generate the change list in the format required, use the <strong>GetChanges</strong> console app from
<a href="https://github.com/nunit/NUnit.InternalTools">NUnit.InternalTools</a> which fetches and prints all issues in the given
milestone, e.g. for milestone 4.0:</p>
<p>Build a release version of the app, and go to the GetChanges directory. Run the following command, with the appropriate
version number and milestone number:</p>
<p><code>bin\Release\net7.0\getchanges.exe -o nunit -r nunit -l -m 4.2 &gt; changes4.2.md</code></p>
<p>The <code>-o</code> and <code>-r</code> options specify the owner and repo, respectively.
The <code>-l</code> option includes all links, including those that are closed. The <code>-m</code> option specifies the milestone. If no
milestone is specified, the current milestone is used.</p>
<p><em>Note:  You might need to manually create the NUnit.IssuePr.XYZ link file. It will be automated in the future.</em></p>
<p>Copy content of the file created to the top of  <code>framework.md</code> file in the <code>docs</code> directory.</p>
<h3 id="update-the-documentation">Update the Documentation</h3>
<p>For any significant changes to how NUnit is used or what it does, the appropriate pages of the documentation should be
updated or new pages created. For new features or changes to features, include the version of NUnit that the feature was
implemented in.</p>
<h3 id="push-all-changes">Push All Changes</h3>
<p>Push all changes to the files in git as part of the preceding steps. Make sure you have pushed them and they have been
reviewed in the PR.
Then merge the PR to main.
Pull down the changes to your local machine.</p>
<h2 id="creating-the-release-locally">Creating the Release Locally</h2>
<p>The release <strong>should not</strong> be built on a developers machine, it should be built by the build servers. The following
steps are only for reproducing the steps locally.</p>
<ol>
<li><p>Clear the package directory (if it exists) to avoid confusion:</p>
<p><code>del package\*</code></p>
<p>This is not absolutely required, but will be helpful if you have other release packages present in the directory.</p>
</li>
<li><p>You should be working on the release branch. Do a pull to make sure you have everything up to date. If changes of any
significance were merged, you should test again before creating the release.</p>
</li>
<li><p>Ensure that the release build is up to date. If you have any doubt whether the latest code changes have actually been
built, do a clean build. If the build is up to date you may skip this step.</p>
<p><code>build --target build</code></p>
</li>
<li><p>Optionally create the image directory manually</p>
<p><code>build --target createimage</code></p>
<p>You do this to ensure that the latest build is used for packaging. If the <code>images</code> directory does not already contain
a subdirectory named for this release (package version and suffix) you may skip this step as a new one will be
created automatically.</p>
</li>
<li><p>Create the packages by running:</p>
<p><code>build --target package</code></p>
</li>
<li><p>Verify that the correct packages have been created in the <code>package</code> sub-directory:</p>
</li>
</ol>
<ul>
<li>NUnit-VERSION.zip</li>
<li>NUnit.VERSION.nupkg</li>
<li>NUnit.VERSION.snupkg</li>
<li>NUnitLite.VERSION.nupkg</li>
<li>NUnitLite.VERSION.snupkg</li>
</ul>
<h2 id="testing-the-release">Testing the Release</h2>
<p>The degree to which each package needs testing may vary depending on what has been changed. At a minimum,</p>
<ol>
<li>Ensure the <a href="https://nunit.visualstudio.com/NUnit/_build?definitionId=11">NUnit Framework CI</a> build succeeds on all
platforms and that the tests passed.</li>
<li>Download <code>Package.zip</code> from the build and extract it locally, or use the ones you built locally.</li>
<li>Five files should be extracted, <code>NUnit.{version}.nupkg</code>, <code>NUnit.{version}.snupkg</code>, <code>NunitLite.{version}.nupkg</code>,
<code>NunitLite.{version}.snupkg</code> and <code>NUnit.Framework-{version}.zip</code>.</li>
<li>In Visual Studio, create a test project and add your local directory as a package source. Install the packages and
verify that they apply to the project correctly.</li>
<li>Run unit tests for platforms or features that have changed in the release.</li>
</ol>
<h2 id="publishing-the-release">Publishing the Release</h2>
<h3 id="github">Github</h3>
<ol>
<li>Log onto Github and go to the main NUnit repository at <a href="https://github.com/nunit/nunit">https://github.com/nunit/nunit</a>.</li>
<li>Select Releases and then click on the &quot;Draft a new release&quot; button.</li>
<li>Enter a tag to be used for the release. Currently our tags are simply the version of the release,
like <code>4.2.0</code>.  Don't add a <code>v</code> prefix to the tag. MinVer is set up to be used without the prefix. Note that the tag
already exists, as you created it when you pushed the commit, or after that push.</li>
<li>Enter a title for the release, like NUnit 3.13. If you type 'N' you'll get some hints.</li>
<li>Use the preamble from the release notes for the description and add a link to the full release notes on the docs
website.</li>
<li>If this is an Alpha or Beta release, check the box that indicates a pre-release.</li>
<li>Upload the five files from <code>Package</code> folder that you downloaded or built locally. Note that we upload all the
packages, including those that are also published on NuGet.</li>
<li>Click the &quot;Publish release&quot; button to publish the release on Github.</li>
</ol>
<h3 id="nuget">NuGet</h3>
<ol>
<li>Sign on to nuget.org.</li>
<li>Select Upload package.</li>
<li>Browse to the location of the <code>NUnit.VERSION.nupkg</code> you created and upload it.</li>
<li>Verify that the info is correct and click the &quot;Submit&quot; button.</li>
<li>Repeat steps 2-4 for <code>NUnitLite.VERSION.nupkg</code> and the two <code>snupkg</code> files.</li>
</ol>
<h3 id="website">Website</h3>
<p>Create a PR to update the <a href="https://github.com/nunit/nunit.github.io">NUnit.org</a> website with the release.
Use the <code>_posts</code> folder and add a new one there.</p>
<h3 id="notify-users">Notify Users</h3>
<p>Send notifications to twitter, both for NUnit and for your own, add to your LinkedIn and any other relevant SosMed
channels you have.</p>
<h3 id="close-the-milestone">Close the Milestone</h3>
<p>The milestone representing this release should be closed at this time.</p>

</article>
          </div>

          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <div class="contribution">
                <ul class="nav">
                  <li>
                    <a href="https://github.com/nunit/docs/blob/master/docs/articles/developer-info/Packaging-the-Framework.md/#L1" class="contribution-link">Edit this page</a>
                  </li>
                </ul>
              </div>
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
                <h5>In this article</h5>
                <div></div>
              </nav>
            </div>
          </div>
        </div>
      </div>

      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
      <span>Generated by <strong>DocFX</strong></span> | Copyright (c) 2018-<span id="currentYear"></span> The NUnit Project - Licensed under <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a>
      
          </div>
        </div>
      </footer>
    </div>

    <script type="text/javascript" src="../../styles/docfx.vendor.min.js"></script>
    <script type="text/javascript" src="../../styles/docfx.js"></script>
    <script type="text/javascript" src="../../styles/main.js"></script>
  </body>
</html>
